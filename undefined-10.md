# 이미지 업로드

Form을 보면 encType="multipart/form-data" 가 되있다. 

이미지를 올리면 저 형식으로 올라가는데, 우리는 json과 url만 받을 수 있게끔 되있다. 

먼저 multipart를 처리할 수 있는걸 설정해줘야 한다. 

multer를 통해 구현 ㄱㄱ





이미지나 동영상을 업로드 하는 방식은 몇가지 있는데, 

한방에 보내는 방식, 두번 보내는 방식이 있다. 

### 한방에 보내는 방식

```text
{
    content:'안녕',
    image:010101000101111011011011
}
```

* 이미지를 올리는데 시간도 많이 걸리고, 
* 업로드가 끝나야만 후처리\(머신러닝\) 등이 가능하다. 

### 두번에 보내는 방식

첫번째 보낼때는 이미지만 먼저 데이터를 서버에 업로드 해놓는다. 

```text
{
    image:010101000101111011011011
}
```

그리고 서버는 파일명을 리턴해주는데, 

프론트에서 파일명을 알고 있기때문에 리사이징이나 미리보기등을 사람이 컨텐츠 작성하는 동안 진행 할 수 있다. 

단점도 있긴 한데, 

* 이미지 올리고 마음이 바뀌어서 게시글을 취소하면, image가 서버에 남겨진다. 
* 프론트, 백앤드에서 구현하기가 까다롭다. 
* 그러나 이미지또한 자산이 되기때문에 서버에 남겨져도 손해는 아니다. 

